server {
	listen 8080;
	server_name localhost www.localhost.com;
	root /var/www/html;
	index index.html;
	client_max_body_size 10M;
	
	error_page 404 /errors/404.html;
	error_page 500 502 503 504 /errors/50x.html;

	# Route principale
	location / {
		allowed_methods GET POST;
		autoindex off;
	}
	
	# Route avec autoindex activé
	location /files {
		allowed_methods GET;
		autoindex on;
	}oui
	
	# Route pour les uploads
	location /upload {
		allowed_methods POST DELETE;
		upload_path /var/www/uploads;
		client_max_body_size 5M;
		autoindex on;
	}
	
	# Route avec redirection
	location /old-page {
		return 301 /new-page;
	}
}

# Serveur secondaire sur port 8081 (pour tester virtual hosting)
server {
	listen 8081;
	server_name example.com www.example.com;
	root /var/www/example;
	index index.html;
	client_max_body_size 1M;
	
	location / {
		allowed_methods GET POST DELETE;
		autoindex on;
	}
	
	# Route CGI (si tu dois gérer les scripts)
	location /cgi-bin {
		allowed_methods GET POST;
		root /usr/lib/cgi-bin;
		cgi_extension .php .py;
		cgi_path /usr/bin/php-cgi /usr/bin/python3;
	}
}

# Serveur pour tester le multi-port
server {
	listen 8082;
	listen 8083;
	server_name multi.local;
	root /var/www/multi;
	
	location / {
		allowed_methods GET;
		index home.html;
	}
}